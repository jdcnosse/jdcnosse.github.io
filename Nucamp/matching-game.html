<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Matching Game</title>
        <style>
            img {
                position: absolute;
            }
            div {
                position: absolute;
                width: 500px;
                height: 500px;
            }
            #rightSide {
                left: 500px;
                border-left: 5px solid chocolate;
            }
            body {
                background-color: aquamarine;
                font-family:'Courier New', Courier, monospace;
            }
            .centerText {
                text-align: center;
            }
        </style>
    </head>

    <body>
        <h1 class="centerText">Matching Game</h1>
        <p class="centerText">Click on the extra smiling face on the left.</p>

        <!--This div will contain all the smiley faces on the left side-->
        <div id="leftSide"></div>
        <!--This div will contain all the smiley faces on the right side-->
        <div id="rightSide"></div>

        <script type="text/javascript">
            //create variables to store the left and right side div elements
            const theLeftSide = document.getElementById("leftSide");
            const theRightSide = document.getElementById("rightSide");
            let numberOfFaces = 5;
            let numberOfAttempts = 0;

            //run the function generateFaces when the page loads
            window.addEventListener('load', generateFaces);

            //generating smiley faces for the game
            function generateFaces() {
                for (i = 0; i < numberOfFaces; i++) {
                    //create a new img element
                    let face = document.createElement("img");
                    //assign the new img element's src property to the smiley image
                    face.src = 'images/smile.png';
                    //generate a random number for where the top of the smiley image will appear
                    let randomTop = Math.floor((Math.random() * 400) + 1);
                    //generate a random number for where the left of the smiley image will appear
                    let randomLeft = Math.floor((Math.random() * 400) + 1);
                    //assign the random numbers generated to the top and left style properties for the smiley image
                    face.style.top = randomTop + 'px';
                    face.style.left = randomLeft + 'px';

                    theLeftSide.appendChild(face);
                }

                //copy the left side of smiley faces to the right side
                const leftSideImages = theLeftSide.cloneNode(true);
                //remove one smiley face from the right side and append it to the div
                leftSideImages.removeChild(leftSideImages.lastChild);
                theRightSide.appendChild(leftSideImages);

                theLeftSide.lastChild.addEventListener('click', nextLevel);
                document.body.addEventListener('click', gameOver);

                numberOfAttempts += 1;
            }

            //add more smileys to the screen, to progress to the next level
            function nextLevel() {
                event.stopPropagation();
                numberOfFaces += 5;

                //remove the current faces on the screen
                while (theLeftSide.hasChildNodes()) {
                    theLeftSide.removeChild(theLeftSide.children[0]);
                }
                while (theRightSide.hasChildNodes()) {
                    theRightSide.removeChild(theRightSide.children[0]);
                }

                generateFaces();
            }

            function gameOver() {
                //tell the user that the game is over
                alert('Game Over! You made it to level ' + numberOfAttempts + '!');
                //remove the event listeners that were added in the previous functions
                theLeftSide.removeEventListener('click', nextLevel);
                document.body.removeEventListener('click', gameOver);
                //reload the page
                location.reload();
            }
        </script>
    </body>
</html>